<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Kurodot.io</title>
    <link rel="icon" href="/favicon.ico" />
    <!-- Tailwind CSS 已透過 Vite plugin 編譯 -->
  </head>

  <body>
    <div id="root"></div>

    <!-- 入口 JS/TSX -->
    <script type="module" src="/src/main.tsx"></script>

    <!-- Umami Analytics 保留 -->
    <script defer src="https://cloud.umami.is/script.js" data-website-id="20b3507a-02cd-4fc4-a8e0-2f360e6002d0" data-auto-track="false"></script>

    <script>
      window.addEventListener('load', function() {
        setTimeout(function() {
          if (window.umami) {
            const path = window.location.pathname;
            const match = path.match(/\/(analytics|embed|exhibition)\/([^\/]+)/);
            const exhibitionId = match ? match[2] : null;

            window.umami.track((props) => ({
              ...props,
              url: exhibitionId ? `/exhibition/${exhibitionId}` : path,
              path: exhibitionId ? `/exhibition/${exhibitionId}` : path,
              referrer: document.referrer,
              title: document.title
            }));
          }
        }, 500);
      });
    </script>
  </body>
</html>
